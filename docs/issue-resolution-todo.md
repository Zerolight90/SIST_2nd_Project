# 이슈 대응 TODO 가이드

## 목적
- 좌석 중복 예약, 결제 상태 불일치, 정산 지연 등 자주 발생하는 운영 이슈를 예방·해결하기 위한 표준 작업 절차를 마련한다.
- 각 이슈에 대해 서버/DB/프런트 단계별 체크리스트를 제공하여 반복 대응 시간을 줄이고 품질을 균일하게 유지한다.

## 작업 항목

### 1. 좌석 중복 예약 방지
- [ ] 좌석 선택 시 실행할 락 전략 비교(행 수준 락, Optimistic Lock 등)와 최종 채택안 문서화
- [ ] MySQL 트랜잭션 격리 수준 및 `SELECT ... FOR UPDATE` 적용 여부를 검토하고, 예시 쿼리/롤백 시나리오 작성
- [ ] 좌석 상태 캐시(예: Redis)와 DB 간 동기화 주기, 실패 시 복구 절차를 TODO 항목으로 기록

### 2. 결제 상태 불일치 대응
- [ ] PG 모듈 응답 코드 매핑표, 상태 전이 다이어그램, 재시도 허용 횟수 등을 명세
- [ ] 임시 저장 데이터(Session/Redis) 구조와 만료 정책을 정의하고, 검증·정리 작업을 CRON/트리거 TODO로 추가
- [ ] 실패/취소/타임아웃 시 실행할 보상 트랜잭션과 사용자 알림 경로(SMS/Email/페이지 배너)를 설계

### 3. 정산 리포트 성능/정확도 개선
- [ ] 예매/결제/환불 테이블에 필요한 인덱스·파티셔닝 전략을 점검하고 개선 TODO를 목록화
- [ ] 정산 배치 쿼리 분리(일/주/월), 실행 순서, 로그 저장 경로를 문서화
- [ ] 환불 발생 시 좌석 재고 복구 및 정산 데이터 수정 절차를 체크리스트로 정리

